(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8605336c"],{"7bff":function(e,t,a){"use strict";a("9f10")},"9f10":function(e,t,a){},edef:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-container"},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",[a("el-breadcrumb-item",{attrs:{to:"/"}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("素材管理")])],1)],1),a("div",{staticStyle:{"padding-bottom":"20px"}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.radio1,callback:function(t){e.radio1=t},expression:"radio1"}},[a("el-radio-button",{attrs:{label:"全部"}}),a("el-radio-button",{attrs:{label:"收藏"}})],1)],1),a("el-button",{staticStyle:{float:"right","margin-top":"-50px"},attrs:{type:"success",size:"mini"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("上传图片素材 ")]),a("el-row",{attrs:{gutter:10}},e._l(e.listArr,(function(t){return a("el-col",{key:t.id,staticClass:"img_item",attrs:{xs:12,sm:6,md:6,lg:4}},[a("el-image",{staticStyle:{height:"180px",width:"100%"},attrs:{src:t.url,fit:"cover"}}),a("div",{staticClass:"option"},[a("span",{staticClass:"el-icon-star-on",style:{color:t.is_collected?"red":""},on:{click:function(a){return e.collectFn(t)}}}),a("span",{staticClass:"el-icon-delete",on:{click:function(a){return e.delImg(t)}}})])],1)})),1),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[8,12,16,20],"current-page":e.reqParams.page,"page-size":e.reqParams.per_page,total:e.total},on:{"current-change":e.hPageChange,"size-change":e.handleSizeChange}}),a("el-dialog",{attrs:{title:"提示","append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://api-toutiao-web.itheima.net/mp/v1_0/user/images",headers:e.headers,"on-success":e.hUploadSuccess,name:"image","show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.imgSrc?a("img",{staticClass:"avatar",attrs:{src:e.imgSrc}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)},s=[],i=a("3835"),n=(a("96cf"),a("1da1")),c=a("365c"),o={name:"images",data:function(){return{dialogVisible:!1,reqParams:{collect:!1,page:1,per_page:8},listArr:[],radio1:"全部",total:0,imgSrc:"",headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}},watch:{radio1:function(e){this.reqParams.page=1,this.reqParams.collect="全部"!==e,this.getImgListFn()}},methods:{getImgListFn:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["k"])(e.reqParams);case 2:if(a=t.sent,r=Object(i["a"])(a,2),s=r[0],n=r[1],!s){t.next=8;break}return t.abrupt("return");case 8:e.listArr=n.data.data.results,e.total=n.data.data.total_count;case 10:case"end":return t.stop()}}),t)})))()},collectFn:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.reqParams.page=1,a.next=3,Object(c["g"])(e.id,{collect:!e.is_collected});case 3:if(r=a.sent,s=Object(i["a"])(r,1),n=s[0],!n){a.next=8;break}return a.abrupt("return");case 8:t.getImgListFn();case 9:case"end":return a.stop()}}),a)})))()},hPageChange:function(e){this.reqParams.page=e,this.getImgListFn()},handleSizeChange:function(e){this.reqParams.per_page=e,this.getImgListFn()},delImg:function(e){var t=this;this.$confirm("确定删除该图片？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["j"])(e.id);case 2:if(r=a.sent,s=Object(i["a"])(r,1),n=s[0],!n){a.next=7;break}return a.abrupt("return");case 7:t.$message({type:"success",message:"删除成功!"}),t.getImgListFn();case 9:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},hUploadSuccess:function(e,t){this.imgSrc=e.data.url,this.$message.success("图片素材上传成功"),this.dialogVisible=!1,this.getImgListFn()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("图片只能是 JPG 格式 / PNG 格式!"),a||this.$message.error("图片大小不能超过 2MB!"),t&&a}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getImgListFn();case 1:case"end":return t.stop()}}),t)})))()}},l=o,u=(a("7bff"),a("2877")),g=Object(u["a"])(l,r,s,!1,null,"5904577f",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-8605336c.a6a81763.js.map